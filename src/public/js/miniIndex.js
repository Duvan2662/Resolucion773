const divRespuestas=document.querySelector(".contenedor"),botonImprimir=document.querySelector("#boton"),imputCorreo=document.querySelector("#email");let distancia,escenarioExposicion=ubicacion,varrequiereSenalizacion=!0,requiereMedicion=!1;const crearDiv=(e,a)=>{const n=`\n    <div class="containeer mt-5">\n    <div class="row mt-3">\n        <div class="col-md-6 offset-md-3">\n            <div class="card">\n                <div class="card-body">\n                    <h5 class="card-title">${e}</h5>\n                    <p class="card-text">\n                          ${a}\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    </div>\n    `;divRespuestas.innerHTML+=n},convertirAdBm=e=>{let a,n;return a=10*Math.log10(e/1),a=Number(a.toFixed(2)),n=a+30,n},convertirAW=e=>{let a,n;return a=e-30,n=Math.pow(10,a/10),n=Number(n.toFixed(2)),n},calcularPire=()=>{let e=convertirAdBm(potencia);ganancia=parseFloat(ganancia);let a=e+ganancia;return convertirAW(a)};let pire=calcularPire();const rangoFrecuenciaTabla3=()=>frecuencia>30&&frecuencia<=400?0:frecuencia>400&&frecuencia<=2e3?1:2,calculardistancia=e=>{let a;if("Acceso restringido"===escenarioExposicion)switch(e){case 0:return a=.143*Math.sqrt(pire),a=Number(a.toFixed(3)),a;case 1:return a=2.92*Math.sqrt(pire/frecuencia),a=Number(a.toFixed(3)),a;case 2:return a=.0638*Math.sqrt(pire),a=Number(a.toFixed(3)),a}else switch(e){case 0:return a=.319*Math.sqrt(pire),a=Number(a.toFixed(3)),a;case 1:return a=6.38*Math.sqrt(pire/frecuencia),a=Number(a.toFixed(3)),a;case 2:return a=.143*Math.sqrt(pire),a=Number(a.toFixed(3)),a}},textoDistanciaMininma=e=>{let a;a=frecuencia<30?'\n        El cálculo de estas distancias es aplicable para las estaciones que operen en frecuencias iguales o mayores a 30 MHz. Para las estaciones cuya frecuencia de operación sea inferior a 30\n        MHz el único procedimiento de evaluación aplicable es el de mediciones de campos electromagnéticos><br>\n            Según la tabla 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=23" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        ':frecuencia>3e5?'\n        El cálculo de estas distancias es aplicable para las estaciones que operen en frecuencias iguales o mayores a 30 MHz y menores que 300000MHz<br>\n            Según la tabla 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=23" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        ':`\n            La distancia a la antena o sistema irradiante (r) : <b>${e}m</b><br>\n            Según la tabla 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=23" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        `,crearDiv("LÍMITES MÁXIMOS DE EXPOSICIÓN",a)},crearImagenExplicativo=(e,a,n,i)=>`\n            <div class="containeer mt-5">\n            <div class="row mt-3">\n            <div class="col-md-6 offset-md-3">\n            <div class="card">\n                    <div class="card-body">\n                    <img src="/img/${e}" class="img-fluid rounded float-start" alt="...">\n                    <div class="texto-superpuestoR">${n} m</div>\n                    <div class="texto-superpuestoA">${a} m</div>\n                    <div class="texto-superpuestoD">${i} m</div>\n                    </div>\n                </div>\n            </div>\n            </div>\n            </div>\n        `,textoExplicativo=(e,a,n)=>{let i=`\n            ${crearImagenExplicativo("explicativo.png",e,a,n)}\n            <br>En donde :<br>\n            d: es la mínima distancia horizontal a la estructura de soporte de la antena o sistema irradiante,\n            en metros.<br>\n            r: es la mínima distancia a la antena o sistema irradiante, en metros.<br>\n            a: es la distancia vertical desde la altura de una persona a la antena o sistema irradiante. Esta se\n            calcula como la “altura del centro de radiación - altura de una persona”, con el ánimo de\n            estandarizar, se establece el cálculo de “a” como “altura del centro de radiación - 2 metros”.<br>\n            Según la la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n\n    `;crearDiv("Gráfico Explicativo",i)},crearImagenExplicativo2=(e,a,n,i)=>`\n            <div class="containeer mt-5">\n            <div class="row mt-3">\n            <div class="col-md-6 offset-md-3">\n            <div class="card">\n                    <div class="card-body">\n                    <img src="/img/${e}" class="img-fluid rounded float-start" alt="...">\n                    <div class="texto-superpuestoR">${n} m</div>\n                    <div class="texto-superpuestoA">${a} m</div>\n                    <div class="texto-superpuestoD">${i}</div>\n                    </div>\n                </div>\n            </div>\n            </div>\n            </div>\n        `,textoExplicativo2=(e,a,n="")=>{let i=`\n            ${crearImagenExplicativo2("explicativo.png",e,a,n)}\n            <br>En donde :<br>\n            d: es la mínima distancia horizontal a la estructura de soporte de la antena o sistema irradiante,\n            en metros.<br>\n            r: es la mínima distancia a la antena o sistema irradiante, en metros.<br>\n            a: es la distancia vertical desde la altura de una persona a la antena o sistema irradiante. Esta se\n            calcula como la “altura del centro de radiación - altura de una persona”, con el ánimo de\n            estandarizar, se establece el cálculo de “a” como “altura del centro de radiación - 2 metros”.<br>\n            Según la la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resólucion 000773 DE 2023-10-31</a>\n\n    `;crearDiv("Gráfico Explicativo",i)},textoDistanciaHorizontal=(e,a,n)=>{let i,r="Definición de distancias y alturas para estaciones que prestan servicios de telecomunicaciones en bandas diferentes a las IMT";return frecuencia<30?(i='\n            El cálculo de estas distancias es aplicable para las estaciones que operen en frecuencias iguales o mayores a 30 MHz. Para las estaciones cuya frecuencia de operación sea inferior a 30\n            MHz el único procedimiento de evaluación aplicable es el de mediciones de campos electromagnéticos><br>\n            Según la tabla 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=23" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        ',void crearDiv(r,i)):frecuencia>3e5?(i='\n            El cálculo de estas distancias es aplicable para las estaciones que operen en frecuencias iguales o mayores a 30 MHz y menores que 300000MHz<br>\n            Según la tabla 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=23" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        ',void crearDiv(r,i)):(altura<2?(textoExplicativo2(altura,e),i=`\n        La distancia a la antena o sistema irradiante (r) : <b>${e} m</b><br>\n        La altura de la antena debe ser mayor o igual 2m su antena mide : <b>${altura} m </b><br\n        <b>Por lo tanto es <b>No conforme<b> (Requiere medicion)</b><br>\n        Según la ecuación y la Figura 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n        Para más información, haz clic en el siguiente enlace:<br>\n        <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        `):n>e?(textoExplicativo2(n,e,"No requiere"),i=`\n        A la altura de la antena se le restan 2m según la norma : <b>${n}m</b><br> \n        La distancia a la antena o sistema irradiante (r) : <b>${e}m</b><br>\n        <b>Por lo tanto es <b>Normalmente Conforme</b> por que la altura es mayor a la distancia irradiante (No Requiere medición)</b><br>\n        Según la ecuación y Figura 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n        Para más información, haz clic en el siguiente enlace:<br>\n        <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        `):a>e?(textoExplicativo(n,e,a),i=`\n        A la altura de la antena se le restan 2m según la norma : <b>${n}m</b><br> \n        La mínima distancia horizontal a la estructura de soporte de la antena o sistema irradiante (d) : <b>${a}m</b><br>\n        La distancia a la antena o sistema irradiante (r) : <b>${e}m</b><br>\n        <b>Por lo tanto es <b>No conforme<b> (Requiere medicion)</b><br>\n        Según la ecuación y la Figura 3 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n        Para más información, haz clic en el siguiente enlace:<br>\n        <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        `):(textoExplicativo(n,e,a),i=`\n        A la altura de la antena se le restan 2m según la norma : <b>${n}m</b><br>\n        La mínima distancia horizontal a la estructura de soporte de la antena o sistema irradiante (d) : <b>${a}m</b><br>\n        La distancia a la antena o sistema irradiante (r) : <b>${e}m</b><br>\n        <b>Por lo tanto es <b>Normalmente Conforme</b> (NO Requiere medición)</b><br>\n        Según la ecuación y la Figura 3  de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n        Para más información, haz clic en el siguiente enlace:<br>\n        <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n    `),void crearDiv(r,i))},textoDistanciaHorizontal2=()=>{crearDiv("Definición de distancias y alturas para estaciones que prestan servicios de telecomunicaciones en bandas diferentes a las IMT",'\n            Como la PIRE de su antena es mayor o igual que mi 1000 W y existe una antena en un radio de 100 m se sugiere realizar la medición de la antena<br>\n            Según el punto número 3 "condiciones técnicas y operativas", del anexo de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        ')},crearImagen=e=>`\n            <div class="containeer mt-5">\n            <div class="row mt-3">\n            <div class="col-md-6 offset-md-3">\n            <div class="card">\n                    <div class="card-body">\n                    <img src="/img/${e}" class="img-fluid rounded float-start" alt="...">\n                    </div>\n                </div>\n            </div>\n            </div>\n            </div>\n        `,textoSenaliacion=()=>{let e;e=varrequiereSenalizacion?`\n           <b>Si requiere Señalización por ser una antena: ${tiposervicio}</b><br>\n            ${crearImagen("ocupacional.png")}\n            ${crearImagen("rebasamiento.png")}\n            <br>Según el punto 7 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=39" target="_blank">Resolución 000773 DE 2023-10-31</a>\n\n        `:`\n            <b>No requiere Señalización por ser una antena: ${tiposervicio}</b><br>\n            Según el punto 7 de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=39" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        `,crearDiv("Señalización",e)},textoDatos=()=>{let e,a;a="Acceso restringido"===escenarioExposicion?"Ocupacional":"Público en general",e=`\n        Teniendo en cuenta los datos:<br>\n        Servicio : <b>${servicio}</b><br>\n        Tipo Servicio : <b>${tiposervicio}</b><br>\n        Escena de exposición  : <b>${escenarioExposicion} (${a})</b><br>\n        Potencia Transmitida : <b>${potencia} W</b><br>\n        Frecuencia de la antena : <b>${frecuencia} MHz</b><br>\n        Ganacia de la antena : <b>${ganancia} dBi</b><br>\n        Altura de la antena : <b>${altura} m</b><br>\n        La PIRE : <b>${pire} W</b><br>\n    `,crearDiv("<b>Datos de su antena</b>",e)},calcularDistanciaMinima=()=>{if(frecuencia<30)return textoDistanciaMininma();if(frecuencia>3e5)return textoDistanciaMininma();let e=frecuencia>30&&frecuencia<=400?0:frecuencia>400&&frecuencia<=2e3?1:2;distancia=calculardistancia(e),textoDistanciaMininma(distancia)},calculardistanciaHorizontal=()=>{if(frecuencia<30)return textoDistanciaHorizontal();if(frecuencia>3e5)return textoDistanciaHorizontal();let e,a=distancia,n=altura-2;if(altura<2)return textoDistanciaHorizontal(a,e,n);e=Math.sqrt(Math.pow(a,2)-Math.pow(n,2)),e=Number(e.toFixed(3)),textoDistanciaHorizontal(a,e,n)},requiereSenalizacion=()=>{"FM"===tiposervicio&&(varrequiereSenalizacion=!1),textoSenaliacion()},iniciar=()=>{textoDatos(),calcularDistanciaMinima(),pire>=1e3&&"Si"===pregunta?crearDiv("Definición de distancias y alturas para estaciones que prestan servicios de telecomunicaciones en bandas diferentes a las IMT",'\n            Como la PIRE de su antena es mayor o igual que mi 1000 W y existe una antena en un radio de 100 m se sugiere realizar la medición de la antena<br>\n            Según el punto número 3 "condiciones técnicas y operativas", del anexo de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        '):calculardistanciaHorizontal(),"FM"===tiposervicio&&(varrequiereSenalizacion=!1),textoSenaliacion()};botonImprimir.addEventListener("click",(()=>{const e=document.querySelectorAll(".PDF"),a=document.createElement("div");e.forEach(((e,n)=>{const i=e.cloneNode(!0);if(i.style.margin="20px",i.style.padding="10px",i.style.width="100%",n>1){const e=document.createElement("div");e.classList.add("page-break"),a.appendChild(e)}a.appendChild(i)}));const n=a;html2pdf().from(n).set({margin:0,filename:"resultados.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"},pagebreak:{mode:["avoid-all","css","legacy"],after:".page-break"}}).save()})),textoDatos(),calcularDistanciaMinima(),pire>=1e3&&"Si"===pregunta?crearDiv("Definición de distancias y alturas para estaciones que prestan servicios de telecomunicaciones en bandas diferentes a las IMT",'\n            Como la PIRE de su antena es mayor o igual que mi 1000 W y existe una antena en un radio de 100 m se sugiere realizar la medición de la antena<br>\n            Según el punto número 3 "condiciones técnicas y operativas", del anexo de la RESOLUCIÓN 773 DE 2023 de la ANE.<br>\n            Para más información, haz clic en el siguiente enlace:<br>\n            <a href="https://www.ane.gov.co/Sliders/ANE%202021/Resolucio%CC%81n%20%20No.%20000773%20de%2031102023.pdf#page=24" target="_blank">Resolución 000773 DE 2023-10-31</a>\n        '):calculardistanciaHorizontal(),"FM"===tiposervicio&&(varrequiereSenalizacion=!1),textoSenaliacion();